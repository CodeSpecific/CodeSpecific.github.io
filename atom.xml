<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Vitamin Blogs</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://codespecific.github.io/"/>
  <updated>2019-03-23T03:26:34.499Z</updated>
  <id>http://codespecific.github.io/</id>
  
  <author>
    <name>Vitamin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Mysql数据库使用Insert语句插入中文数据报错</title>
    <link href="http://codespecific.github.io/2019/03/23/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8Insert%E8%AF%AD%E5%8F%A5%E6%8F%92%E5%85%A5%E4%B8%AD%E6%96%87%E6%95%B0%E6%8D%AE%E6%8A%A5%E9%94%99/"/>
    <id>http://codespecific.github.io/2019/03/23/Mysql数据库使用Insert语句插入中文数据报错/</id>
    <published>2019-03-23T02:50:58.000Z</published>
    <updated>2019-03-23T03:26:34.499Z</updated>
    
    <content type="html"><![CDATA[<p>在mysql的命令行模式中，通过insert语句插入中文数据的时候报错，类似于下面这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Incorrect string value: &apos;\xE7\x8F&apos; for column &apos;name&apos; at row 1</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>造成这个错误通常是由于创建数据表的时候使用了不正确的编码格式,可以使用如下命令查看操作的目标数据表的编码格式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE TABLE 表名；</span><br></pre></td></tr></table></figure></p><p>通过结果就可以看到目标表的目标字段对应的编码格式，我们只需要把该列的编码格式转化为<code>utf8</code>即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 MODIFY 列名 数据类型 CHARACTER SET utf8 非空约束</span><br><span class="line"></span><br><span class="line">例如：ALTER TABLE student MODIFY name VARCHAR(20) CHARACTER SET utf8 NOT NULL</span><br></pre></td></tr></table></figure></p><p>当然这只是一个临时的解决办法，更近一步的解决办法是修改数据表的编码，防止以后在使用命令添加数据列的时候，使用的仍是数据表的编码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 DEFAULT CHARSET utf8;</span><br></pre></td></tr></table></figure></p><p>然后这还不是最终的解决办法，我们还可以通过修改数据库的编码方式来影响新创建的数据表的编码方式,进而影响数据列的编码方式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE 数据库名 DEFAULT CHARACTER SET utf8;</span><br></pre></td></tr></table></figure></p><p>但是这需要我们每次在创建数据库的时候都必须指定编码方式，要想一劳永逸，我们可以直接去修改mysql的配置文件，使用如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/mysql/mysql.cnf.d/mysqld.cnf</span><br></pre></td></tr></table></figure></p><p>添加如下配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8</span><br></pre></td></tr></table></figure></p><p>保存之后重新启动mysql服务即可,命令如下(以Ubuntu16.04为例)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysql.service</span><br></pre></td></tr></table></figure></p><p>注意在设置编码格式的时候，使用如下命令查看支持的编码格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &apos;char%&apos;;</span><br></pre></td></tr></table></figure></p><p><img src="https://github.com/CodeSpecific/GraphBed/raw/master/2019/03/23/2887109953-5c1e211113c7c_articlex.png" alt="图片描述"></p>]]></content>
    
    <summary type="html">
    
      Mysql数据库使用Insert语句插入中文数据报错
    
    </summary>
    
      <category term="Mysql" scheme="http://codespecific.github.io/categories/Mysql/"/>
    
    
      <category term="Error" scheme="http://codespecific.github.io/tags/Error/"/>
    
  </entry>
  
</feed>
